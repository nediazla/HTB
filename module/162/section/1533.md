## Introducción a la documentación e informes

---

La fuerte documentación y las habilidades de informes son increíblemente beneficiosas en cualquier área de tecnología de la información o seguridad de la información, y dominar estas habilidades puede ayudarnos a progresar rápidamente en nuestras carreras. Ser altamente técnico es excelente y esencial, pero sin habilidades blandas para respaldar nuestras habilidades técnicas de PWNIN, no seremos tan efectivos si estamos escribiendo políticas y procedimientos internos, documentación técnica, informes de pruebas de penetración u otros tipos de entregas de clientes.

No existe "talla única" para notar y preparar informes, pero hay principios fundamentales que deben seguirse para tener éxito. Este módulo explorará diferentes estilos a partir de herramientas de notificación, organizando nuestra evidencia en nuestra VM de prueba, escribiendo resúmenes ejecutivos para audiencias no técnicas y documentando cadenas de ataque y hallazgos técnicos. Intentamos proporcionar una fórmula genérica que cualquiera pueda usar para lograr el éxito mientras rociamos en consejos, trucos y mejores prácticas que hemos aprendido de alrededor de 25 años combinados en varios roles de consultoría técnica y roles gerenciales orientados al cliente.

Una consideración crucial para nosotros como probadores es una prueba de penetración es una instantánea a tiempo del estado de seguridad de la red de destino. Debemos incluir una sección de descripción general en nuestro informe que habla sobre el tipo de trabajo realizado, quién lo realizó, las direcciones IP de origen utilizadas en las pruebas y cualquier consideración especial (es decir, pruebas realizadas de forma remota a través de VPN o desde un host dentro de la red del cliente). Esta descripción general también debe indicar que nuestras pruebas se realizaron durante un período específico y que cualquier cambio en los sistemas en el alcance y las vulnerabilidades resultantes no se capturarían en este informe entregable. Podríamos decir: "Todas las actividades de prueba se realizaron entre el 7 de enero de 2022 y el 19 de enero de 2022." También podríamos agregar un descargo de responsabilidad, como "este informe representa una instantánea en el tiempo durante el período de prueba antes mencionado, y ACME Consulting, LLC no puede dar fe del estado de ningún activo de información propiedad del cliente fuera de esta ventana de prueba".

---

## Documentación e informes en la práctica

Puede estar pensando "`this will be a boring module.`", o "`how could we possibly make an entire course on this topic?`". Si bien la documentación e informes no es el tema más emocionante y ciertamente no tan satisfactorio como hacer una caja o obtener DA en un laboratorio o una red del mundo real, estas son habilidades críticas para cualquier persona en un rol de consultoría. A continuación se presentan algunos ejemplos de veces en nuestras carreras cuando la documentación ordenada y exhaustiva y los informes detallados nos rescataron de lo que podría haber aumentado a una situación bastante desagradable.

**Escenario 1 - El caso de una VM explosible**

Durante un compromiso particularmente largo (una prueba de penetración externa de casi un mes), me registré para el día, y mi VM no se cargaría correctamente. Pasé un tiempo tratando de recuperar el sistema de archivos, pero se había ido por completo. Afortunadamente, había estado tomando excelentes y detalladas notas del proyecto usando una copia local de OneNote en mi estación de trabajo base. Mi equipo en ese momento utilizó una solución de almacenamiento compartida para todos los proyectos, y teníamos un script automatizado para sincronizar nuestros datos para compartir al final de las pruebas, tanto para el control de calidad como para el archivo. En un consejo de un compañero de equipo más senior, había estado respaldando mi evidencia de prueba a esta acción al final de cada día hábil. Por lo tanto, una vez que construí una nueva VM (a partir de una plantilla que mantuve), todo lo que tenía que hacer era sincronizar los datos de mi proyecto, y volví a probar sin interrupciones. Si no hubiera estado siguiendo un proceso definido, el resultado podría haber sido catastrófico, perder semanas de trabajo y potencialmente perder a un cliente por la empresa o incluso mi trabajo.

**Escenario 2 - Ping of Death**

Sabía que esta prueba de penetración interna sería difícil a partir de la llamada de alcance inicial. Un miembro del equipo interno de TI del cliente fue muy hostil y cuestionó todo, sospechoso de las habilidades del equipo y muy protectora de un conjunto de servidores críticos (cuyas direcciones IP no estaban en el alcance de las pruebas). Durante la fase de enumeración de las pruebas, recibí un correo electrónico y la llamada del cliente pidiendo que detuviera todas las pruebas, ya que habíamos derribado múltiples servidores críticos que eran sensibles a cualquier tipo de escaneo. Produje todos los datos de registro, archivos de alcance y datos de escaneo sin procesar. Las direcciones IP de los hosts afectados estaban en mis escaneos, pero también se incluyeron en el archivo de alcance, que el cliente había confirmado. En este caso, no había hecho nada malo cuando estaba probando el alcance que me dieron (y confirmé) y no había realizado ninguna actividad de prueba imprudente. Sin embargo, se aprendió una lección que agregué a mis procesos. Después de esto, me aseguré de pedir a los clientes una lista específica de las direcciones IP individuales y los nombres de host que deberían excluirse explícitamente de cualquier escaneos u otra actividad de prueba. En esta situación, tuve una fuerte documentación para respaldar qué actividades se habían realizado, y la confirmación por escrito de la dirección IP en el alcance varía del cliente. Sin embargo, encontré la oportunidad de refinar mis procesos aún más y crecer como consultor.

**Escenario 3 - Lento como melaza**

En este último ejemplo, estaba realizando una prueba de penetración interna en el sitio en el edificio de la sede de un cliente, sentado en un área de la oficina donde se sentó su personal. Sentado detrás de mí había un administrador de red particularmente hostil que había sido escéptico sobre nuestras habilidades y herramientas desde la llamada de inicio, afirmando que las pruebas de penetración previas de otras compañías habían disminuido la red masivamente debido a los evaluadores inexpertos e imprudentes. A menos de 20 minutos después de las pruebas, este administrador de la red había enviado correos electrónicos a toda la lista de distribución y vino a mi escritorio diciéndome que nuestros escaneos habían detenido la red para detenerse, y él había bloqueado nuestras direcciones IP de origen. Luego pasamos por un ejercicio de compartir nuestra salida de escaneo, demostrando que habíamos seguido las mejores prácticas y nada de lo que habíamos hecho explicaría la desaceleración de la red. Mientras tanto, otro administrador determinó que el modo de depuración se había habilitado en cada dispositivo de red, que, combinado con exploraciones NMAP normales, era suficiente para abrumar los dispositivos y causar desaceleraciones. Una vez que esto fue deshabilitado, las pruebas continuaron sin problemas. En este caso, nuestra documentación respaldó nuestras acciones y obligó al cliente a investigar más. Si no hubiéramos tenido ninguna documentación (o pobre), entonces la culpa podría haberse presentado fácilmente, y podría haber afectado enormemente la relación con el cliente y nuestra reputación.

Estas historias ilustran la importancia de una fuerte documentación. Necesitamos poder justificar nuestras acciones y, si se les pregunta, poder producir evidencia para que el cliente intente solucionar un problema. No es raro que los problemas de red durante una prueba de penetración sean culpar al probador, independientemente de si es el resultado de sus actividades. Queremos estar en una posición sólida para cubrirnos y ayudar a nuestros clientes. Además, nunca queremos luchar para volver a hacer las pruebas después de perder evidencia o pedirle a un cliente por más tiempo porque no fuimos diligentes en nuestra notificación y organización.

---

## Sobre este módulo

Hemos incluido un cuaderno de obsidiana de muestra y un informe de prueba de penetración interna de muestra (en formatos de MS Word y PDF - Contraseña zip`hackthebox`) que se puede descargar desde el`Resources`pestaña en la parte superior derecha de esta o cualquier otra sección del módulo. Estos son excelentes recursos complementarios para mantenerse para ustedes mismos, pero también útiles para tener a mano mientras trabajan en el contenido.

Hay muchas oportunidades en este módulo para practicar las habilidades que se enseñan, pero ninguna de ellas es obligatoria para completar el módulo. Para obtener el mayor valor de este módulo, recomendamos (obviamente) tomar notas detalladas y usar los consejos y trucos para ver dónde puede haber agujeros o ineficiencias en sus procesos. Una vez que cree esto, esperamos que encuentre formas de ser más productivo y reducir la carga de informes porque, seamos honestos, a nadie le gusta informar; Lo toleramos como un mal necesario. Una vez que haya terminado con este módulo, vale la pena practicar estos consejos sobre compromisos del mundo real o, si aún no está trabajando en un rol de consultoría, practique su documentación e informes de informes contra objetivos de capacitación y laboratorios.

Incluimos un host de ataque preconfigurado y un pequeño laboratorio con este módulo que puede usar para simular una prueba de penetración interna. Aproveche esto y úselo para practicar tanto como desee hasta que se sienta cómodo identificando todos los hallazgos y desarrolle un estilo de documentación que se ajuste a su flujo de trabajo.

A lo largo del módulo, puede vernos arrojando términos como "un interno" o "un externo". En estos casos, nos referimos a una prueba de penetración interna o prueba de penetración externa, respectivamente.

Hemos tratado de hacer que este tema típicamente aburrido sea más atractivo de lo habitual, así que atravesar.